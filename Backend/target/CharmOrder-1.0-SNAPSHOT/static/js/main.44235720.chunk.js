(this.webpackJsonpspringfrontend=this.webpackJsonpspringfrontend||[]).push([[0],{147:function(t,e,n){},148:function(t,e,n){},223:function(t,e,n){"use strict";n.r(e);var c=n(13),a=n(0),r=n.n(a),i=n(24),s=n.n(i),o=(n(147),n(32)),u=n(230),l=n(228),j=(n(148),n(73)),d=n(133),h=n(65),b=n(131),f=n(227),O=n(225),m=function(t){var e="/login?username=".concat(t.username,"&password=").concat(t.password);return fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"}).then((function(t){if(t.status<200||t.status>=300)throw Error("Fail to log in")}))},p=n(138),g=j.a.Option,x=function(t){var e=t.itemId,n=Object(a.useState)(!1),r=Object(o.a)(n,2),i=r[0],s=r[1];return Object(c.jsx)(h.a,{title:"Add to shopping cart",children:Object(c.jsx)(b.a,{loading:i,type:"primary",icon:Object(c.jsx)(p.a,{}),onClick:function(){s(!0),function(t){return fetch("/order/".concat(t),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"}).then((function(t){if(t.status<200||t.status>=300)throw Error("Fail to add menu item to shopping cart")}))}(e).then((function(){return d.b.success("Successfully add item")})).catch((function(t){return d.b.error(t.message)})).finally((function(){s(!1)}))}})})},y=function(){var t=Object(a.useState)([]),e=Object(o.a)(t,2),n=e[0],r=e[1],i=Object(a.useState)(),s=Object(o.a)(i,2),u=s[0],l=s[1],h=Object(a.useState)([]),b=Object(o.a)(h,2),m=b[0],p=b[1],y=Object(a.useState)(!1),S=Object(o.a)(y,2),v=S[0],w=S[1],C=Object(a.useState)(!1),F=Object(o.a)(C,2),I=F[0],k=F[1];return Object(a.useEffect)((function(){k(!0),fetch("/restaurants").then((function(t){if(t.status<200||t.status>=300)throw Error("Fail to get restaurants");return t.json()})).then((function(t){p(t)})).catch((function(t){d.b.error(t.message)})).finally((function(){k(!1)}))}),[]),Object(a.useEffect)((function(){var t;u&&(w(!0),(t=u,fetch("/restaurant/".concat(t,"/menu")).then((function(t){if(t.status<200||t.status>=300)throw Error("Fail to get menus");return t.json()}))).then((function(t){r(t)})).catch((function(t){d.b.error(t.message)})).finally((function(){w(!1)})))}),[u]),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(j.a,{value:u,onSelect:function(t){return l(t)},placeholder:"Select a restaurant",loading:I,style:{width:300},onChange:function(){},children:m.map((function(t){return Object(c.jsx)(g,{value:t.id,children:t.name})}))}),u&&Object(c.jsx)(f.b,{style:{marginTop:20},loading:v,grid:{gutter:16,xs:1,sm:2,md:4,lg:4,xl:3,xxl:3},dataSource:n,renderItem:function(t){return Object(c.jsx)(f.b.Item,{children:Object(c.jsxs)(O.a,{title:t.name,extra:Object(c.jsx)(x,{itemId:t.id}),children:[Object(c.jsx)("img",{src:t.imageUrl,alt:t.name,style:{height:"auto",width:"100%",display:"block"}}),"Price: ".concat(t.price)]})})}})]})},S=n(125),v=n(137),w=n(132),C=n(226),F=n(229),I=n(232),k=n(233),P=function(t){Object(v.a)(n,t);var e=Object(w.a)(n);function n(){var t;Object(S.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))).state={loading:!1},t.onFinish=function(e){t.setState({loading:!0}),m(e).then((function(){t.setState({displayModal:!1}),d.b.success("Login Successful"),t.props.onSuccess()})).catch((function(t){d.b.error(t.message)})).finally((function(){t.setState({loading:!1})}))},t.render=function(){return Object(c.jsxs)(C.a,{name:"normal_login",onFinish:t.onFinish,style:{width:300,margin:"auto"},children:[Object(c.jsx)(C.a.Item,{name:"username",rules:[{required:!0,message:"Please input your Username!"}],children:Object(c.jsx)(F.a,{prefix:Object(c.jsx)(I.a,{}),placeholder:"Username"})}),Object(c.jsx)(C.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}],children:Object(c.jsx)(F.a.Password,{prefix:Object(c.jsx)(k.a,{}),placeholder:"Password"})}),Object(c.jsx)(C.a.Item,{children:Object(c.jsx)(b.a,{type:"primary",htmlType:"submit",loading:t.state.loading,children:"Login"})})]})},t}return n}(r.a.Component),T=n(231),E=l.a.Text,L=function(){var t=Object(a.useState)(!1),e=Object(o.a)(t,2),n=e[0],r=e[1],i=Object(a.useState)(),s=Object(o.a)(i,2),u=s[0],l=s[1],j=Object(a.useState)(!1),h=Object(o.a)(j,2),O=h[0],m=h[1],p=Object(a.useState)(!1),g=Object(o.a)(p,2),x=g[0],y=g[1];Object(a.useEffect)((function(){n&&(m(!0),fetch("/cart").then((function(t){if(t.status<200||t.status>=300)throw Error("Fail to get shopping cart data");return t.json()})).then((function(t){l(t)})).catch((function(t){d.b.error(t.message)})).finally((function(){m(!1)})))}),[n]);var S=function(){r(!1)};return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(b.a,{type:"primary",shape:"round",onClick:function(){r(!0)},children:"Cart"}),Object(c.jsx)(T.a,{title:"My Shopping Cart",onClose:S,visible:n,width:520,footer:Object(c.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(c.jsx)(E,{strong:!0,children:"Total price: $".concat(null===u||void 0===u?void 0:u.totalPrice)}),Object(c.jsxs)("div",{children:[Object(c.jsx)(b.a,{onClick:S,style:{marginRight:8},children:"Cancel"}),Object(c.jsx)(b.a,{onClick:function(){y(!0),fetch("/checkout").then((function(t){if(t.status<200||t.status>=300)throw Error("Fail to checkout")})).then((function(){d.b.success("Successfully checkout"),r(!1)})).catch((function(t){d.b.error(t.message)})).finally((function(){y(!1)}))},type:"primary",loading:x,disabled:O||0===(null===u||void 0===u?void 0:u.orderItemList.length),children:"Checkout"})]})]}),children:Object(c.jsx)(f.b,{loading:O,itemLayout:"horizontal",dataSource:u?u.orderItemList:[],renderItem:function(t){return Object(c.jsx)(f.b.Item,{children:Object(c.jsx)(f.b.Item.Meta,{title:t.menuItem.name,description:"$".concat(t.price)})})}})})]})},M=u.a.Header,B=u.a.Content,H=l.a.Title;var U=function(){var t=Object(a.useState)(!1),e=Object(o.a)(t,2),n=e[0],r=e[1];return Object(c.jsxs)(u.a,{style:{height:"100vh"},children:[Object(c.jsx)(M,{children:Object(c.jsxs)("div",{className:"header",children:[Object(c.jsx)(H,{level:2,style:{color:"white",lineHeight:"inherit",marginBottom:0},children:"Charm Order"}),n&&Object(c.jsx)("div",{children:Object(c.jsx)(L,{})})]})}),Object(c.jsx)(B,{style:{padding:"50px",maxHeight:"calc(100% - 64px)",overflowY:"auto"},children:n?Object(c.jsx)(y,{}):Object(c.jsx)(P,{onSuccess:function(){return r(!0)}})})]})},q=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,234)).then((function(e){var n=e.getCLS,c=e.getFID,a=e.getFCP,r=e.getLCP,i=e.getTTFB;n(t),c(t),a(t),r(t),i(t)}))};s.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(U,{})}),document.getElementById("root")),q()}},[[223,1,2]]]);
//# sourceMappingURL=main.44235720.chunk.js.map